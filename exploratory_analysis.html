<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Exploratory Analysis</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/journal.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Sections
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="index.html">Home</a>
    </li>
    <li>
      <a href="data_cleaning_and_merging.html">Data Pre-Processing</a>
    </li>
    <li>
      <a href="exploratory_analysis.html">Exploratory Analysis</a>
    </li>
    <li>
      <a href="statistical_analysis.html">Statistical Analysis</a>
    </li>
    <li>
      <a href="additional_prediction.html">Additional Prediction</a>
    </li>
    <li>
      <a href="https://datasciencetk.shinyapps.io/NYC-covid19-trends/">Interactive Map</a>
    </li>
    <li>
      <a href="dashboard.html">Dashboard</a>
    </li>
    <li>
      <a href="ProjectCode.html">Project Code</a>
    </li>
  </ul>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Exploratory Analysis</h1>

</div>


<pre class="r"><code>jimzip &lt;- function(csv_file, path) {
  # create full path to csv file
  full_csv &lt;- paste0(path, &quot;/&quot;, csv_file)
  # append &quot;.zip&quot; to csv file
  zip_file &lt;- paste0(full_csv, &quot;.zip&quot;)
  # unzip file
  unzip(zip_file)
  # read csv
  data_extract &lt;- read_csv(csv_file)
  # be sure to remove file once unzipped (it will live in working directory)
  on.exit(file.remove(csv_file))
  # output data
  data_extract
}

# Apply function to filtered census data CSV
census_data &lt;- jimzip(&quot;census_filtered.csv&quot;, &quot;./data&quot;)</code></pre>
<pre class="r"><code># Read in PUMA outcomes data
health_data &lt;-
  read_csv(&quot;./data/outcome_puma.csv&quot;)

# Merge census data with PUMA outcomes data
merged_data &lt;- merge(census_data, health_data, by = &quot;puma&quot;)

# Deprecate census data alone
rm(census_data)</code></pre>
<pre class="r"><code># Clean the merged census and outcomes data
# Each row represents one 
cleaned_data = 
  merged_data %&gt;% 
  # Remove variables less useful for analysis or redundant (high probability of collinearity with remaining variables)
  select(-serial, -cluster, -strata, -multyear, -ancestr1, -ancestr2, -labforce, -occ, -ind, -incwage, -occscore, -pwpuma00, -ftotinc, -hcovpub) %&gt;% 
  # Remove duplicate rows, if any
  distinct() %&gt;% 
  # Rename variables
  rename(
    borough = countyfip,
    has_broadband = cihispeed,
    birthplace = bpl,
    education = educd,
    employment = empstat,
    personal_income = inctot,
    work_transport = tranwork,
    household_income = hhincome,
    on_foodstamps = foodstmp,
    family_size = famsize,
    num_children = nchild,
    US_citizen = citizen,
    puma_vacc_rate = puma_vacc_per,
    on_welfare = incwelfr,
    poverty_threshold = poverty
  ) %&gt;% 
  # Recode variables according to data dictionary
  mutate(
    # Researched mapping for county
    borough = recode(
      borough,
      &quot;5&quot; = &quot;Bronx&quot;,
      &quot;47&quot; = &quot;Brooklyn&quot;,
      &quot;61&quot; = &quot;Manhattan&quot;,
      &quot;81&quot; = &quot;Queens&quot;,
      &quot;85&quot; = &quot;Staten Island&quot;
    ),
    rent = ifelse(
      rent == 9999, 0,
      rent
    ),
    household_income = ifelse(
      household_income %in% c(9999998,9999999), NA,
      household_income
    ),
    on_foodstamps = recode(
      on_foodstamps,
      &quot;1&quot; = &quot;No&quot;,
      &quot;2&quot; = &quot;Yes&quot;
    ),
    has_broadband = case_when(
      has_broadband == &quot;20&quot; ~ &quot;No&quot;,
      has_broadband != &quot;20&quot; ~ &quot;Yes&quot;
    ),
    sex = recode(
      sex,
      &quot;1&quot; = &quot;Male&quot;,
      &quot;2&quot; = &quot;Female&quot;
    ),
    # Collapse Hispanic observation into race observation
    race = case_when(
      race == &quot;1&quot; ~ &quot;White&quot;,
      race == &quot;2&quot; ~ &quot;Black&quot;,
      race == &quot;3&quot; ~ &quot;American Indian&quot;,
      race %in% c(4,5,6) ~ &quot;Asian and Pacific Islander&quot;,
      race == 7 &amp; hispan %in% c(1,2,3,4) ~ &quot;Hispanic&quot;,
      race == 7 &amp; hispan %in% c(0,9) ~ &quot;Other&quot;,
      race %in% c(8,9) ~ &quot;2+ races&quot;
    ),
    birthplace = case_when(
      birthplace %in% 1:120 ~&quot;US&quot;,
      birthplace %in% 121:950 ~ &quot;Non-US&quot;,
      birthplace == 999 ~&quot;Unknown&quot;
    ),
    US_citizen = case_when(
      US_citizen %in% c(1,2) ~ &quot;Yes&quot;,
      US_citizen %in% 3:8 ~&quot;No&quot;,
      US_citizen %in% c(0,9) ~ &quot;Unknown&quot;
    ),
    # Chose languages based on highest frequency observed
    language = case_when(
      language == &quot;1&quot; ~ &quot;English&quot;,
      language == &quot;12&quot; ~ &quot;Spanish&quot;,
      language == &quot;43&quot; ~ &quot;Chinese&quot;,
      language == &quot;0&quot; ~ &quot;Unknown&quot;,
      language == &quot;31&quot; ~ &quot;Hindi&quot;,
      !language %in% c(1,12,43,0,31) ~ &quot;Other&quot;
    ),
    # Collapse multiple health insurance variables into single variable
    health_insurance = case_when(
      hcovany == 1 ~ &quot;None&quot;,
      hcovany == 2 &amp; hcovpriv == 2 ~ &quot;Private&quot;,
      hcovany == 2 &amp; hcovpriv == 1 ~ &quot;Public&quot;
    ),
    education = case_when(
      education %in% 2:61 ~ &quot;Less Than HS Graduate&quot;,
      education %in% 62:64 ~ &quot;HS Graduate&quot;,
      education %in% 65:100 ~ &quot;Some College&quot;,
      education %in% 110:113 ~ &quot;Some College&quot;,
      education == 101 ~ &quot;Bachelor&#39;s Degree&quot;,
      education %in% 114:116 ~ &quot;Post-Graduate Degree&quot;,
      education %in% c(0,1,999) ~ &quot;Unknown&quot;
    ),
    employment = case_when(
      employment %in% c(0,3) ~ &quot;Not in labor force&quot;,
      employment == 1 ~ &quot;Employed&quot;,
      employment == 2 ~ &quot;Unemployed&quot;
    ),
    personal_income = ifelse(
      personal_income %in% c(9999998,9999999), NA,
      personal_income
    ),
    household_income = ifelse(
      household_income %in% c(9999998,9999999), NA,
      household_income
    ),
    on_welfare = case_when(
      on_welfare &gt; 0 ~ &quot;Yes&quot;,
      on_welfare == 0 ~ &quot;No&quot;
    ), 
    poverty_threshold = case_when(
      poverty_threshold &gt;= 100 ~ &quot;Above&quot;,
      poverty_threshold &lt; 100 ~ &quot;Below&quot;
    ),
    work_transport = case_when(
      work_transport %in% c(31:37, 39) ~ &quot;Public Transit&quot;,
      work_transport %in% c(10:20, 38) ~ &quot;Private Vehicle&quot;,
      work_transport == 50 ~ &quot;Bicycle&quot;,
      work_transport == 60 ~ &quot;Walking&quot;,
      work_transport == 80 ~ &quot;Worked From Home&quot;,
      work_transport %in% c(0, 70) ~ &quot;Other&quot;
    )
  ) %&gt;% 
  # Eliminate columns no longer needed after transformation
  select(-hispan, -hcovany, -hcovpriv) %&gt;% 
  # Relocate new columns
  relocate(health_insurance, .before = personal_income) %&gt;% 
  relocate(poverty_threshold, .before = work_transport) %&gt;% 
  relocate(on_welfare, .before = poverty_threshold) %&gt;% 
  relocate(perwt, .before = hhwt) %&gt;% 
  # Create factor variables where applicable
  mutate(across(.cols = c(puma, borough, on_foodstamps, has_broadband, sex, race, birthplace, US_citizen, language, health_insurance, education, employment, on_welfare, poverty_threshold, work_transport), as.factor))</code></pre>
<div id="exploratory-analysis" class="section level1">
<h1>Exploratory Analysis</h1>
<p>On this page, we’ll explore overall trends for our key outcomes – hospitalizations, deaths, and vaccinations – across PUMAs and boroughs in New York City, as well as high-level trends for how these outcomes correlate with census predictors, including major demographic variables like age, race, and sex.</p>
<div id="overview-of-outcome-variables" class="section level2">
<h2>Overview of Outcome Variables</h2>
<div id="outcomes-by-puma" class="section level3">
<h3>Outcomes by PUMA</h3>
<p>We can observe that <strong>hospitalization rates from as low as ~0.4% to nearly 2% (a 5x difference)</strong> by PUMA (see <a href="https://www1.nyc.gov/assets/planning/download/pdf/data-maps/nyc-population/census2010/puma_cd_map.pdf">NYC Map of PUMAs and Community Districts</a>), <strong>death rates range from just over 0.05% all the way to above 0.6% (a 12x difference!)</strong>, and <strong>vaccination rates range from as low as ~30% to above 100%</strong> in one PUMA (as an artifact of migration between PUMA – a known issue in NYC DOHMH data). Excluding this vaccination outlier, the PUMAs with higher vaccination rates tend to have 75-85% of their residents vaccinated.</p>
<p><img src="exploratory_analysis_files/figure-html/outcomes%20all%20PUMAs-1.png" width="672" /></p>
<p><img src="exploratory_analysis_files/figure-html/worst%20PUMA%20outcomes-1.png" width="672" /></p>
<p><img src="exploratory_analysis_files/figure-html/best%20PUMA%20outcomes-1.png" width="672" /></p>
<p>While our regression analysis more fully explores potential collinearity of our outcomes variables, we were interested how well hospitalizations, deaths, and vaccinations tracked each other at the PUMA level. Our findings show that across PUMAs in all boroughs, <strong>hospitalizations and deaths had a 0.913 correlation</strong>, which was highly statistically significant, whereas <strong>vaccination was not significantly correlated with either hospitalization or fatality.</strong></p>
<p><img src="exploratory_analysis_files/figure-html/key%20outcome%20associations-1.png" width="672" /></p>
<p><img src="exploratory_analysis_files/figure-html/outcome%20correlations-1.png" width="672" /></p>
<pre class="r"><code># ggpairs correlations between key pairs, faceted by borough
puma_level_data %&gt;% 
  select(covid_hosp_rate, covid_death_rate, covid_vax_rate, borough) %&gt;% 
  mutate(
    covid_hosp_rate = covid_hosp_rate,
    covid_death_rate = covid_death_rate
  ) %&gt;% 
  rename(
    &quot;Hospitalized&quot; = covid_hosp_rate,
    &quot;Deceased&quot; = covid_death_rate,
    &quot;Vaccinated&quot; = covid_vax_rate,
    &quot;Borough&quot; = borough
  ) %&gt;% 
  ggpairs(
    title = &quot;Correlations Between Key Outcomes&quot;,
    subtitle = &quot;By Borough&quot;,
    ggplot2::aes(color = Borough, alpha = 0.3)
  ) + 
  scale_fill_discrete() + 
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))</code></pre>
</div>
<div id="outcomes-by-borough" class="section level3">
<h3>Outcomes by Borough</h3>
<p>Beyond exploring our data at the PUMA level, we were keen to understand trends at the borough level as well.</p>
<p>We can observe that hospitalization rates are generally more favorable in <strong>Manhattan and Brooklyn and less favorable in Queens and the Bronx</strong>. Similarly, death rates track hospitalization rates fairly well, with the <strong>best outcomes occurring in Manhattan and Brooklyn and the worst outcomes occurring largely in Queens.</strong> And unsurprisingly given the low correlation between vaccination and death or hospitalization by PUMA, we find that <strong>all of the top 10 vaccination rates occur in PUMAs found in Manhattan and Queens</strong>, whereas <strong>all of the bottom 10 vaccination rates occur in PUMAs found in the Bronx and Brooklyn.</strong></p>
<p><img src="exploratory_analysis_files/figure-html/hospitalizations%20by%20borough-1.png" width="672" /></p>
<p><img src="exploratory_analysis_files/figure-html/deaths%20by%20borough-1.png" width="672" /></p>
<p><img src="exploratory_analysis_files/figure-html/vax%20by%20borough-1.png" width="672" /></p>
<p>What proportion of PUMAs in a given borough were above or below the citywide median on a given outcome?</p>
<table>
<caption>% of PUMAs in Each Borough Above Citywide PUMA Median</caption>
<colgroup>
<col width="16%" />
<col width="13%" />
<col width="23%" />
<col width="24%" />
<col width="22%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Borough</th>
<th align="right">Total PUMAs</th>
<th align="right">% Above Hosp Median</th>
<th align="right">% Above Death Median</th>
<th align="right">% Above Vax Median</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Bronx</td>
<td align="right">10</td>
<td align="right">70.0</td>
<td align="right">50.0</td>
<td align="right">20.0</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">18</td>
<td align="right">22.2</td>
<td align="right">38.9</td>
<td align="right">16.7</td>
</tr>
<tr class="odd">
<td align="left">Manhattan</td>
<td align="right">10</td>
<td align="right">30.0</td>
<td align="right">30.0</td>
<td align="right">80.0</td>
</tr>
<tr class="even">
<td align="left">Queens</td>
<td align="right">14</td>
<td align="right">85.7</td>
<td align="right">78.6</td>
<td align="right">85.7</td>
</tr>
<tr class="odd">
<td align="left">Staten Island</td>
<td align="right">3</td>
<td align="right">33.3</td>
<td align="right">33.3</td>
<td align="right">66.7</td>
</tr>
</tbody>
</table>
</div>
<div id="outcomes-by-demographic-combinations" class="section level3">
<h3>Outcomes by Demographic Combinations</h3>
<p>It’s quite common for individuals to self-identity according to a triplet of demographic variables: age, race, and sex. Epidemiological studies often use inclusion or exclusion criteria that explicitly restrict study populations to a subset of the overall population for each of these variables. As a result, we decided it would be interesting to explore how each uniquely-identified triplet (age, race, sex) performs on key COVID-19 outcomes. Generally, we find that <strong>hospitalization and death rates are lower among young white males and females, whereas vaccination rates are higher among Asian and Pacific Islanders across ages and sexes. Older American Indiain individuals, along with younger and middle-aged Black individuals, tended to have lower vaccination rates, while mixed race, American Indian, and “other” racial groups tended towards higher hospitalizations and fatalities as well.</strong></p>
<pre class="r"><code># Lowest hospitalization rates
race_age_sex %&gt;% 
  filter(outcome == &quot;hosp_rate&quot;) %&gt;% 
  mutate(
    outcome_rate = outcome_rate / 1000
  ) %&gt;% 
  arrange(outcome_rate) %&gt;% 
  select(race, age_class, sex, outcome_rate) %&gt;% 
  head() %&gt;% 
  knitr::kable(
    caption = &quot;Lowest hospitalization rates&quot;,
    col.names = c(&quot;Race&quot;, &quot;Age&quot;, &quot;Sex&quot;, &quot;% Hospitalized&quot;),
    digits = 2
  )</code></pre>
<table>
<caption>Lowest hospitalization rates</caption>
<thead>
<tr class="header">
<th align="left">Race</th>
<th align="left">Age</th>
<th align="left">Sex</th>
<th align="right">% Hospitalized</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">White</td>
<td align="left">21-30</td>
<td align="left">Female</td>
<td align="right">0.88</td>
</tr>
<tr class="even">
<td align="left">White</td>
<td align="left">31-40</td>
<td align="left">Male</td>
<td align="right">0.89</td>
</tr>
<tr class="odd">
<td align="left">White</td>
<td align="left">31-40</td>
<td align="left">Female</td>
<td align="right">0.89</td>
</tr>
<tr class="even">
<td align="left">White</td>
<td align="left">21-30</td>
<td align="left">Male</td>
<td align="right">0.90</td>
</tr>
<tr class="odd">
<td align="left">White</td>
<td align="left">41-50</td>
<td align="left">Male</td>
<td align="right">0.93</td>
</tr>
<tr class="even">
<td align="left">White</td>
<td align="left">41-50</td>
<td align="left">Female</td>
<td align="right">0.93</td>
</tr>
</tbody>
</table>
<pre class="r"><code># Highest hospitalization rates
race_age_sex %&gt;% 
  filter(outcome == &quot;hosp_rate&quot;) %&gt;% 
  mutate(
    outcome_rate = outcome_rate / 1000
  ) %&gt;% 
  arrange(desc(outcome_rate)) %&gt;% 
  select(race, age_class, sex, outcome_rate) %&gt;% 
  head() %&gt;% 
  knitr::kable(
    caption = &quot;Highest hospitalization rates&quot;,
    col.names = c(&quot;Race&quot;, &quot;Age&quot;, &quot;Sex&quot;, &quot;% Hospitalized&quot;),
    digits = 2
  )</code></pre>
<table>
<caption>Highest hospitalization rates</caption>
<thead>
<tr class="header">
<th align="left">Race</th>
<th align="left">Age</th>
<th align="left">Sex</th>
<th align="right">% Hospitalized</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">American Indian</td>
<td align="left">81-90</td>
<td align="left">Male</td>
<td align="right">1.27</td>
</tr>
<tr class="even">
<td align="left">Other</td>
<td align="left">61-70</td>
<td align="left">Male</td>
<td align="right">1.22</td>
</tr>
<tr class="odd">
<td align="left">Other</td>
<td align="left">11-20</td>
<td align="left">Male</td>
<td align="right">1.21</td>
</tr>
<tr class="even">
<td align="left">Other</td>
<td align="left">41-50</td>
<td align="left">Male</td>
<td align="right">1.20</td>
</tr>
<tr class="odd">
<td align="left">Other</td>
<td align="left">61-70</td>
<td align="left">Female</td>
<td align="right">1.19</td>
</tr>
<tr class="even">
<td align="left">Asian and Pacific Islander</td>
<td align="left">91-100</td>
<td align="left">Male</td>
<td align="right">1.17</td>
</tr>
</tbody>
</table>
<pre class="r"><code># Lowest death rates
race_age_sex %&gt;% 
  filter(outcome == &quot;death_rate&quot;) %&gt;% 
  mutate(
    outcome_rate = outcome_rate / 1000
  ) %&gt;% 
  arrange(outcome_rate) %&gt;% 
  select(race, age_class, sex, outcome_rate) %&gt;% 
  head() %&gt;% 
  knitr::kable(
    caption = &quot;Lowest death rates&quot;,
    col.names = c(&quot;Race&quot;, &quot;Age&quot;, &quot;Sex&quot;, &quot;% Deceased&quot;),
    digits = 2
  )</code></pre>
<table>
<caption>Lowest death rates</caption>
<thead>
<tr class="header">
<th align="left">Race</th>
<th align="left">Age</th>
<th align="left">Sex</th>
<th align="right">% Deceased</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">White</td>
<td align="left">21-30</td>
<td align="left">Female</td>
<td align="right">0.24</td>
</tr>
<tr class="even">
<td align="left">White</td>
<td align="left">31-40</td>
<td align="left">Male</td>
<td align="right">0.24</td>
</tr>
<tr class="odd">
<td align="left">White</td>
<td align="left">21-30</td>
<td align="left">Male</td>
<td align="right">0.24</td>
</tr>
<tr class="even">
<td align="left">White</td>
<td align="left">31-40</td>
<td align="left">Female</td>
<td align="right">0.25</td>
</tr>
<tr class="odd">
<td align="left">Other</td>
<td align="left">81-90</td>
<td align="left">Male</td>
<td align="right">0.25</td>
</tr>
<tr class="even">
<td align="left">White</td>
<td align="left">41-50</td>
<td align="left">Male</td>
<td align="right">0.26</td>
</tr>
</tbody>
</table>
<pre class="r"><code># Highest death rates
race_age_sex %&gt;% 
  filter(outcome == &quot;death_rate&quot;) %&gt;% 
  mutate(
    outcome_rate = outcome_rate / 1000
  ) %&gt;% 
  arrange(desc(outcome_rate)) %&gt;% 
  select(race, age_class, sex, outcome_rate) %&gt;% 
  head() %&gt;% 
  knitr::kable(
    caption = &quot;Highest death rates&quot;,
    col.names = c(&quot;Race&quot;, &quot;Age&quot;, &quot;Sex&quot;, &quot;% Deceased&quot;),
    digits = 2
  )</code></pre>
<table>
<caption>Highest death rates</caption>
<thead>
<tr class="header">
<th align="left">Race</th>
<th align="left">Age</th>
<th align="left">Sex</th>
<th align="right">% Deceased</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2+ races</td>
<td align="left">91-100</td>
<td align="left">Male</td>
<td align="right">0.35</td>
</tr>
<tr class="even">
<td align="left">Asian and Pacific Islander</td>
<td align="left">91-100</td>
<td align="left">Male</td>
<td align="right">0.34</td>
</tr>
<tr class="odd">
<td align="left">American Indian</td>
<td align="left">81-90</td>
<td align="left">Male</td>
<td align="right">0.32</td>
</tr>
<tr class="even">
<td align="left">Other</td>
<td align="left">11-20</td>
<td align="left">Male</td>
<td align="right">0.32</td>
</tr>
<tr class="odd">
<td align="left">Other</td>
<td align="left">41-50</td>
<td align="left">Male</td>
<td align="right">0.32</td>
</tr>
<tr class="even">
<td align="left">Other</td>
<td align="left">71-80</td>
<td align="left">Male</td>
<td align="right">0.32</td>
</tr>
</tbody>
</table>
<pre class="r"><code># Lowest vax rates
race_age_sex %&gt;% 
  filter(outcome == &quot;vax_rate&quot;) %&gt;% 
  mutate(
    outcome_rate = outcome_rate
  ) %&gt;% 
  arrange(outcome_rate) %&gt;% 
  select(race, age_class, sex, outcome_rate) %&gt;% 
  head() %&gt;% 
  knitr::kable(
    caption = &quot;Lowest vaccination rates&quot;,
    col.names = c(&quot;Race&quot;, &quot;Age&quot;, &quot;Sex&quot;, &quot;% Vaccinated&quot;),
    digits = 2
  )</code></pre>
<table>
<caption>Lowest vaccination rates</caption>
<thead>
<tr class="header">
<th align="left">Race</th>
<th align="left">Age</th>
<th align="left">Sex</th>
<th align="right">% Vaccinated</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">American Indian</td>
<td align="left">71-80</td>
<td align="left">Male</td>
<td align="right">49.32</td>
</tr>
<tr class="even">
<td align="left">Black</td>
<td align="left">11-20</td>
<td align="left">Female</td>
<td align="right">49.35</td>
</tr>
<tr class="odd">
<td align="left">Black</td>
<td align="left">&lt;11</td>
<td align="left">Male</td>
<td align="right">49.48</td>
</tr>
<tr class="even">
<td align="left">Black</td>
<td align="left">11-20</td>
<td align="left">Male</td>
<td align="right">49.48</td>
</tr>
<tr class="odd">
<td align="left">Black</td>
<td align="left">31-40</td>
<td align="left">Female</td>
<td align="right">49.49</td>
</tr>
<tr class="even">
<td align="left">Black</td>
<td align="left">&lt;11</td>
<td align="left">Female</td>
<td align="right">49.52</td>
</tr>
</tbody>
</table>
<pre class="r"><code># Highest vax rates
race_age_sex %&gt;% 
  filter(outcome == &quot;vax_rate&quot;) %&gt;% 
  mutate(
    outcome_rate = outcome_rate
  ) %&gt;% 
  arrange(desc(outcome_rate)) %&gt;% 
  select(race, age_class, sex, outcome_rate) %&gt;% 
  head() %&gt;% 
  knitr::kable(
    caption = &quot;Highest vaccination rates&quot;,
    col.names = c(&quot;Race&quot;, &quot;Age&quot;, &quot;Sex&quot;, &quot;% Vaccinated&quot;),
    digits = 2
  )</code></pre>
<table>
<caption>Highest vaccination rates</caption>
<thead>
<tr class="header">
<th align="left">Race</th>
<th align="left">Age</th>
<th align="left">Sex</th>
<th align="right">% Vaccinated</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Asian and Pacific Islander</td>
<td align="left">91-100</td>
<td align="left">Female</td>
<td align="right">66.14</td>
</tr>
<tr class="even">
<td align="left">Asian and Pacific Islander</td>
<td align="left">71-80</td>
<td align="left">Female</td>
<td align="right">65.90</td>
</tr>
<tr class="odd">
<td align="left">Asian and Pacific Islander</td>
<td align="left">71-80</td>
<td align="left">Male</td>
<td align="right">65.73</td>
</tr>
<tr class="even">
<td align="left">Asian and Pacific Islander</td>
<td align="left">31-40</td>
<td align="left">Male</td>
<td align="right">65.62</td>
</tr>
<tr class="odd">
<td align="left">Asian and Pacific Islander</td>
<td align="left">31-40</td>
<td align="left">Female</td>
<td align="right">65.58</td>
</tr>
<tr class="even">
<td align="left">2+ races</td>
<td align="left">81-90</td>
<td align="left">Male</td>
<td align="right">65.48</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="associations-between-predictors-and-outcomes" class="section level2">
<h2>Associations between Predictors and Outcomes</h2>
<p>After exploring our outcomes geospatially (across PUMAs and boroughs), as well as on key demographic combinations, we turned towards our larger set of predictors from the census data to determine which, at the PUMA level, were significantly associated with our outcomes at the p &lt; 0.01 significance level.</p>
<p>In the correlation matrix below, we include correlation scores only for those correlations that are highly statistically significant.</p>
<p><strong>Correlates of worse outcomes</strong> * Variables highly correlated with more hospitalizations: % US citizenship, % foreign born * Variables highly correlated with more deaths: % US citizenship, % foreign born * Variables highly correlated with fewer vaccinations: % on welfare, % unemployed, % below poverty line, % on food stamps</p>
<p><strong>Correlates of better outcomes</strong> * Variables highly correlated with fewer hospitalizations: % white, % using public transit to get to work, % with health insurance, % speaking English at home, % with college education, % with broadband access, median personal/household income * Variables highly correlated with fewer deaths: % using public transit to get to work, % with health insurance, % college educated, median personal/household income * Variables highly correlated with more vaccinations: % white, % male, % college educated, % with broadband access, median age, and median personal/household income</p>
<p>Income seems strongly associated with all three COVID-19 outcome variables across PUMAs, which resonates with <a href="https://twitter.com/youyanggu/status/1407418434955005955">prior analysis</a> showing that income levels and income inequality are highly predictive of COVID deaths, among other outcomes.</p>
<p>Another interesting finding is that signifiers of poverty – food stamp use, welfare use, and unemployment, for example – tend to be more associated with vaccination than with outcomes of transmission, like hospitalization or death. This is a fascinating indicator that vaccination, which may be considered a more “active” outcome than the other two – since it requires one to take an action on their own volition or motivation – may be more associated with structural inequality compared to more “passive” transmission.</p>
<p><img src="exploratory_analysis_files/figure-html/correlations%20predictors%20vs%20outcomes-1.png" width="672" /></p>
<p>We then selected each of the four variables with highest correlation (positive or negative) for each outcome, excluding obvious redundancies (like personal income and household income), and explored specific association trends between predictor and outcome, colored by borough. The following graphs explore the variation across PUMAs on each major predictor vs. outcome, colored by borough.</p>
<p><img src="exploratory_analysis_files/figure-html/PUMA%20hospitalization%20rate%20vs%20predictor-1.png" width="672" /></p>
<p><img src="exploratory_analysis_files/figure-html/PUMA%20death%20rate%20vs%20predictor-1.png" width="672" /></p>
<p><img src="exploratory_analysis_files/figure-html/PUMA%20vax%20rate%20vs%20predictor-1.png" width="672" /></p>
<p>Beyond the predictors significantly associated with each outcome, we wanted to focus as well on how outcomes varied by levels of key socioeconomic variables – namely, race, age group, and sex. Because we lack individual outcome data (i.e. each census observation within a given PUMA has the same PUMA-level hospitalization, death, and vaccination rate), we assumed for this analysis that all persons in a given PUMA had equal likelihood of a particular outcome (hospitalization, death, or vaccination) being true, with the likelihood corresponding to the PUMA outcome rate.</p>
<p>Below, we exclude some of the graphs for sex, since we found that males and females appear similar on each outcome. That said, we found older age groups tend to have higher hospitalization and death rates, but also higher vaccination rates. In general, white individuals also have a lower likelihood of hospitalization and death (matching the race-sex-age triplets we explored earlier), as well as a higher likelihood of vaccination (along with Asian and Pacific Islanders).</p>
<p><img src="exploratory_analysis_files/figure-html/hospitalization%20rate%20by%20demo-1.png" width="672" /></p>
<p><img src="exploratory_analysis_files/figure-html/death%20rate%20by%20demo-1.png" width="672" /></p>
<p><img src="exploratory_analysis_files/figure-html/vax%20rate%20by%20demo-1.png" width="672" /></p>
<p>Similarly, we explored how key outcomes varied across categories of a few seemingly important predictor variables for each outcome observed in our correlation matrix. We found in the analysis below that all outcomes generally improve with higher income – again, confirming our correlation matrix findings. Education also generally appears protective of poor health outcomes from COVID-19. A couple of other interesting findings include: * Individuals with public health insurance perform similarly to those with no insurance at all * Individuals with unknown citizenship status tend to have lower death rates, which we hypothesize may be the result of under-reporting perhaps due to stigma and/or potential skepticism of city authorities that may result in US citizenship documentation issues</p>
<p><img src="exploratory_analysis_files/figure-html/hosp%20rate%20by%20ses-1.png" width="672" /></p>
<p><img src="exploratory_analysis_files/figure-html/death%20rate%20by%20ses-1.png" width="672" /></p>
<p><img src="exploratory_analysis_files/figure-html/vax%20rate%20by%20ses-1.png" width="672" /></p>
</div>
<div id="associations-between-predictors-and-outcomes-by-borough" class="section level2">
<h2>Associations between Predictors and Outcomes by Borough</h2>
<p>Finally, we were interested in observing disparities <em>within</em> boroughs. Each of the following visualizations has three panels: number of people with outcome, categorized by borough and colored by predictor level; % of people with outcome in each borough, colored by predictor level, compared to the overall composition of the borough by predictor level; and percent with outcome variable, in each borough, plotted by level of predictor.</p>
<p>One notable finding that became immediately clear to us is the Manhattan generally seems to be the most “unequal” borough when exploring how different demographic groups fare on key outcomes. For example, Manhattan has the greatest variation between racial groups on hospitalization and death rate, as well as between age groups on hospitalization rate, and too between racial groups and age groups on vaccination rate. Generally, Manhattan appears more unequal than other boroughs, which also tracks with the <a href="https://furmancenter.org/stateofthecity/view/citywide-and-borough-data">greater income inequality known to exist</a> in Manhattan than in other NYC boroughs.</p>
<p><img src="exploratory_analysis_files/figure-html/hospitalization%20borough%20disparities-1.png" width="672" /><img src="exploratory_analysis_files/figure-html/hospitalization%20borough%20disparities-2.png" width="672" /></p>
<p><img src="exploratory_analysis_files/figure-html/death%20borough%20disparities-1.png" width="672" /><img src="exploratory_analysis_files/figure-html/death%20borough%20disparities-2.png" width="672" /></p>
<p><img src="exploratory_analysis_files/figure-html/vax%20borough%20disparities-1.png" width="672" /><img src="exploratory_analysis_files/figure-html/vax%20borough%20disparities-2.png" width="672" /></p>
<p>The following heatmaps similarly indicate such variations across PUMAs within a given borough, which appear less significant for sex than for race especially.</p>
<p><img src="exploratory_analysis_files/figure-html/borough%20predictor%20heatmap%20hosp-1.png" width="672" /></p>
<p><img src="exploratory_analysis_files/figure-html/borough%20predictor%20heatmap%20death-1.png" width="672" /></p>
<p><img src="exploratory_analysis_files/figure-html/borough%20predictor%20heatmap%20vax-1.png" width="672" height="150%" /></p>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
